<!-- http://operations.connect.na.local/support/Reliability/ReliabilityShared/Pages/AssetRedirect.aspx -->

<!DOCTYPE html>
<html lang="en" class="h-100">

<head>
  <meta charset="UTF-8" />
  <!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->
  <meta http-equiv="Content-Security-Policy" content="script-src 'self';" />
  <link rel="icon" type="image/png" href="iko_logo.png" />
  <title>IKO Item Standardizer</title>
  <link rel="stylesheet" href="bootstrap.min.css" />
  <link rel="stylesheet" href="style.css" />
  <script src="bootstrap.bundle.min.js"></script>
  <script src="../assets/common.js"></script>
</head>

<body class="d-flex flex-column h-100">
  <div class="modal fade" id="popupAlert" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="popupAlertTitle">Loading...</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body" id="popupAlertBody">Loading...</div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- nicest fucking progress bar youve ever seen -->
  <nav class="navbar navbar-border" style="padding: 0px">
    <div id="progress-text">Ready!</div>
    <div class="progress bg-dark" style="height: 40px; width: 100%">
      <div class="progress-bar progress-bar-striped bg-success progress-bar-animated" role="progressbar"
        style="width: 100%" id="progress-bar"></div>
    </div>
  </nav>
  <main class="flex-shrink-0">
    <div class="container-fluid" id="main">
      <div class="row bg-danger text-light" style="padding-top: 20px">
        <div class="col-auto"><img src="IKO_Logo-nobg.png" /></div>
        <h1 class="col">Item Standardizer</h1>
        <div class="col" style="text-align: right">
          <i id="settings" class="material-icons pointer md-size">settings</i>
        </div>
      </div>


      <div class="row" style="padding-top: 20px">
        <div class="accordion">
          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button" type="button" data-bs-toggle="collapse"
                data-bs-target="#accordian-iteminfo">
                Item Information
              </button>
            </h2>
            <div id="accordian-iteminfo" class="accordion-collapse collapse show">
              <div class="accordion-body">
                <div class="row">
                  <div class="col-md">
                    <div class="form-floating input-group">
                      <input type="text" class="form-control" id="interact-num" title="Look Up Existing Item Number"
                        placeholder="Item Number">
                      <label for="interact-num">Item Number</label>
                      <button class="btn btn-danger" type="button" id="load-item">Load</button>
                    </div>
                  </div>
                  <div class="col-md">
                    <div class="form-floating">
                      <select class="form-select" id="num-type">
                        <option selected value="1">9######: Standard MRO</option>
                        <option value="2">98#####: IKO Custom</option>
                        <option value="3">99#####: Supply</option>
                        <option value="4">9S#####: Service</option>
                        <!-- ^ probably dont want this -->
                      </select>
                      <label for="num-type">Item Type (Series)</label>
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md">
                    <div class="form-floating input-group">
                      <input type="text" class="form-control" id="maximo-desc" placeholder="Item Description">
                      <label for="maximo-desc">Item Description</label>
                      <button class="btn btn-danger" type="button" id="valid-single">Check</button>
                    </div>
                  </div>
                  <!-- <i id="triple-paste" class="material-icons pointer col-1">content_paste</i> -->
                </div>

                <div class="row">
                  <div class="col-md">
                    <div class="form-floating">
                      <!-- consider doing a drop down select with filter -->
                      <input type="text" class="form-control" id="uom-field" placeholder="Unit of Measure">
                      <label for="uom-field">Unit of Measure</label>
                    </div>
                  </div>
                  <div class="col-md">
                    <div class="form-floating">
                      <input type="text" class="form-control" id="com-group" placeholder="Commodity Group">
                      <label for="com-group">Commodity Group</label>
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md">
                    <div class="form-floating">
                      <input type="text" class="form-control" id="gl-class" placeholder="GL Class">
                      <label for="gl-class">GL Class</label>
                    </div>
                  </div>
                  <div class="col-md">
                    <div class="form-floating">
                      <input type="text" class="form-control" id="com-code" placeholder="Commodity Code">
                      <label for="com-code">Commodity Code</label>
                    </div>
                  </div>

                </div>

                <div class="row">
                  <div class="col-md">
                    <div class="form-floating">
                      <select class="form-select" name="language" id="selected-language">
                        <option value="nl" selected>Dutch</option>
                        <option value="en">English</option>
                        <option value="fr">French</option>

                      </select>
                      <label for="selected-language">Translate to Language</label>
                    </div>
                  </div>
                  <div class="col-md"></div>
                </div>
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#accordion-validDescription">
                Validated Description
              </button>
            </h2>
            <div id="accordion-validDescription" class="accordion-collapse collapse">
              <div class="accordion-body">
                <div id="verified-table" class="table-responsive row">
                  <table class="table table-bordered">
                    <tbody>
                      <tr id="single-copy">
                        <th>Maximo Description</th>
                        <td id="result-single" colspan="3"></td>
                        <td><i class="material-icons pointer">content_copy</i></td>
                      </tr>
                      <tr id="triple-copy">
                        <th>JDE Description</th>
                        <td id="result-triple-main"></td>
                        <td id="result-triple-ext1"></td>
                        <td id="result-triple-ext2"></td>
                        <td><i class="material-icons pointer">content_copy</i></td>
                      </tr>
                      <tr id="valid-notes">
                        <th>Validation Notes</th>
                        <td id="valid-description" colspan="3"></td>
                        <td>
                          <i id="open-in-browser" class="material-icons pointer" data-bs-toggle="modal"
                            data-bs-target="#popupAlert">ios_share</i>
                        </td>
                      </tr>
                      <tr>
                        <th>Translated Description</th>
                        <td id="trans-desc" colspan="3"></td>
                        <td><i class="material-icons pointer">content_copy</i></td>
                      </tr>

                      <tr id="translation-notes">
                        <th></th>
                        <td id="translation-description" colspan="3"></td>
                        <td></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#accordion-batchMode">
                Batch Mode
              </button>
            </h2>
            <div id="accordion-batchMode" class="accordion-collapse collapse">
              <div class="accordion-body">
                <div class="accordion" id="batchAccordion">
                  <div class="accordion-item">
                    <h2 class="accordion-header">
                      <button class="accordion-button" type="button" data-bs-toggle="collapse"
                        data-bs-target="#accordion-batchInfo">
                        Batch Information
                      </button>
                    </h2>
                    <div id="accordion-batchInfo" class="accordion-collapse collapse show">
                      <div class="accordion-body">
                        <div class="row">
                          <div class="input-group">
                            <input type="file" class="form-control" id="interactive">
                            <!-- probably need some kind of handler to override default action id="valid-file"-->
                            <!-- might possibly also need to just emulate it with another button on the left -->
                            <button class="btn btn-outline-secondary" type="button" id="pauseAuto">Pause</button>
                            <!-- this needs a binding / function (just toggle the interactive switch) -->
                            <button class="btn btn-outline-secondary" type="button" id="continueAuto">Resume</button>
                            <button class="btn btn-outline-secondary" type="button" id="openBatchFile">Open</button>
							                          <!-- this needs a binding / function  -->
                          </div>
                          <div class="row">
                            <div class="row">
                              <div class="col">Active Worksheet: <span id="worksheet-path">#</span></div>
                            </div>
                            <div class="row">
                              <div class="col">Current Row: <span id="current-row">#</span></div>
                              <div class="col">Valid Rows: <span id="valid-row">#</span></div>
                              <div class="col">Total Rows: <span id="total-row">#</span></div>
                            </div>

                            <div class="row">
                              <div class="col">
                                <button id="recheck-desc" title="Verify the description again after editing">
                                  Check Again
                                </button>
                              </div>
                              <div class="col">
                                <button id="save-desc" title="Save the description as a new item">
                                  Save New Item
                                </button>
                              </div>
                              <div class="col">
                                <button id="save-num" title="Assign existing item number to this item">
                                  Assign Existing Number
                                </button>
                              </div>
                              <div class="col">
                                <button id="skip-row" title="Skip this row and read the next row">Next Row</button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="accordion-item">
                    <h2 class="accordion-header">
                      <button class="accordion-button" type="button" data-bs-toggle="collapse"
                        data-bs-target="#accordion-batchSettings">
                        Settings
                      </button>
                    </h2>
                    <div id="accordion-batchSettings" class="accordion-collapse collapse show">
                      <div class="accordion-body">
                        <div class="row">
                          <!-- TODO tooltips for help text -->
                          <div class="col">
                            <label for="ws-name">Worksheet Name:</label>
                          </div>
                          <div class="col">
                            <input type="text" id="ws-name" name="ws-name"
                              title="Name of the Worksheet: Case Sensitive!" placeholder="Sheet1" />
                          </div>
                          <div class="col">
                            <label for="input-col">Columns For Input:</label>
                          </div>
                          <div class="col">
                            <input type="text" id="input-col" name="input-col"
                              title="These columns will be combined to form a description / search text"
                              placeholder="b,c" />
                          </div>
                        </div>
                        <div class="row">
                          <div class="col">
                            <label for="start-row">Starting Row:</label>
                          </div>
                          <div class="col">
                            <input type="number" id="start-row" name="start-row"
                              title="Which row to start processing from" placeholder="2" />
                          </div>
                          <div class="col">
                            <!-- placeholder -->
                          </div>
                          <div class="col">
                            <!-- placeholder -->
                          </div>
                        </div>
                        <div class="row">
                          <div class="col">
                            <label for="output-col">Output: Item Number:</label>
                          </div>
                          <div class="col">
                            <input type="text" id="output-col" name="output-col"
                              title="This column will be populated with: Item Number" placeholder="v" />
                          </div>
                          <div class="col">
                            <label for="output-col-desc">Output: Item Description:</label>
                          </div>
                          <div class="col">
                            <input type="text" id="output-col-desc" name="output-col-desc"
                              title="These columns will be populated with: Description1, Description2, Manufacturer"
                              placeholder="w,x,y" />
                          </div>
                        </div>

                        <div class="row">
                          <div class="col">
                            <label for="output-col-translation">Output: Translated Description:</label>
                          </div>
                          <div class="col">
                            <input type="text" id="output-col-translation" name="output-col-translation"
                              title="This column will be populated with Translated Description in Selected Language"
                              placeholder="z" />
                          </div>
                          <div class="col">
                            <label for="output-col-missing">Output: Missing Translation:</label>
                          </div>
                          <div class="col">
                            <input type="text" id="output-col-missing" name="output-col-missing"
                              title="This columns will be populated with words missing from translation table"
                              placeholder="aa" />
                          </div>
                        </div>

                        <div class="row">
                          <div class="col form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="modeSelect" checked />
                            <label class="form-check-label" for="modeSelect">Interactive?</label>
                          </div>
                          <div class="col form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="translateSelect" checked />
                            <label class="form-check-label" for="translateSelect">Translate?</label>
                          </div>
                          <div class="col form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="relatedSelect" checked />
                            <label class="form-check-label" for="relatedSelect">Find Related?</label>
                          </div>
                          <div class="col">
                            <button id="interactive">Load Spreadsheet</button>
                          </div>
                          <div class="col">
                            <button id="continueAuto" title="Resumes from Current Row in Auto Mode">Resume</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                </div>
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#accordion-relatedAsset">
                Related Assets
              </button>
            </h2>
            <div id="accordion-relatedAsset" class="accordion-collapse collapse">
              <div class="accordion-body">
                <div id="related-table" class="table-responsive row">
                  <table class="table table-bordered">
                    <thead>
                      <tr class="table-info">
                        <th>Percent Match</th>
                        <th>Item Number</th>
                        <th>Item Description</th>
                        <th>UOM</th>
                        <th>C_Group</th>
                        <th>GL_Class</th>
                        <th></th>
                      </tr>
                    </thead>
                    <tbody id="related-items"></tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <h2 class="accordion-header">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#accordion-logs">
                Logs
              </button>
            </h2>
            <div id="accordion-logs" class="accordion-collapse collapse">
              <div class="accordion-body">
                <div class="row table-responsive" id="logs-container">
                  <table class="table table-bordered">
                    <thead>
                      <tr class="table-primary">
                        <th>Level</th>
                        <!-- <th>Time</th> -->
                        <th>Message</th>
                      </tr>
                    </thead>
                    <tbody id="logs-table"></tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- notification thingy thats pops up and auto disappears -->
  <div class="toast-container position-absolute p-3 top-0 end-0" id="toastPlacement"></div>

  <!-- goto top / bottom buttons -->
  <button id="topButton" title="Go to top">Top</button>
  <button id="endButton" title="Go to end">End</button>

  <script src="./item_main.js"></script>
</body>

</html>